<!doctype html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>Language games</title>
    
<!--     <link type="text/css" rel="stylesheet" href="Pgu_jeu.css"> -->
<!--     <script type="text/javascript" language="javascript" src="pgu_jeu/pgu_jeu.nocache.js"></script> -->

    <style>

      body {
        padding-top: 10px;
        padding-left: 20px;
      }
    
      #guess_symbol {
        font-size: 144px;
        text-align: center;
      }
    
      .letter {
        text-align: center;
      }
      .sym {
        text-align: center;
        font-size: 48px;
      }
      .left_f {
        float: left;
      }
      .symbols_table {
        margin-left: 50px;
        margin-top: 30px;
        background-color: whiteSmoke;
      }
    
      .symbol {
        float: left;
      }
    
      .clearfix {
        clear: both;
      }
    
    </style>

  </head>
  <body>
    <!-- OPTIONAL: include this if you want history support -->
    <!-- <iframe src="javascript:''" id="__gwt_historyFrame" tabIndex='-1' style="position:absolute;width:0;height:0;border:0"></iframe> -->
    
    <!-- RECOMMENDED if your web app will not function without JavaScript enabled -->
    <noscript>
      <div style="width: 22em; position: absolute; left: 50%; margin-left: -11em; color: red; background-color: white; border: 1px solid red; padding: 4px; font-family: sans-serif">
        Your web browser must have JavaScript enabled
        in order for this application to display correctly.
      </div>
    </noscript>
    
<!-- ------------------------------------------------------------------------------------ -->
<!-- ------------------------------------------------------------------------------------ -->
<!-- ------------------------------------------------------------------------------------ -->

    
    <p>
      <input type="radio" id="game_hiragana" name="game" value="hiragana" checked>Hiragana</input>
      <input type="radio" id="game_katakana" name="game" value="katakana">Katakana</input>
      <input type="radio" id="game_arabic"   name="game" value="arabic">Arabic</input>
      <input type="radio" id="game_russian"  name="game" value="russian">Russian</input>
      <input type="button" value="Play" onclick="play_game();"></input>
    </p>
    
    <p></p>
    
    <p>
     <div style="width:200px">
       <div id="guess_symbol"></div>
       <div>
           <div style="width:100px;margin: 0 auto;">
             <input id="guess_result" style="width:100%" type="text" onkeyup="check_result(this);"></input>
           </div>
       </div>
     </div>
    </p>
    
    <p></p>
    
    <p>
      <div id="end_of_game" style="visibility:hidden">
        <div>Done!</div>
        <div id="elapsed_time"></div>
      </div>
    </p>
    
    <p></p>
    
    <table id="current_table" class="symbols_table">
     
    <p></p>
    
    <table id="hiragana" class="left_f symbols_table">
    
    <tr><td class="sym">&#12354;</td><td class="sym">&#12356;</td><td class="sym">&#12358;</td><td class="sym">&#12360;</td><td class="sym">&#12362;</td></tr>
    <tr><td class="letter">a</td><td class="letter">i</td><td class="letter">u</td><td class="letter">e</td><td class="letter">o</td></tr>
    
    <tr><td class="sym">&#12363;</td><td class="sym">&#12365;</td><td class="sym">&#12367;</td><td class="sym">&#12369;</td><td class="sym">&#12371;</td></tr>
    <tr><td class="letter">ka</td><td class="letter">ki</td><td class="letter">ku</td><td class="letter">ke</td><td class="letter">ko</td></tr>
    
    <tr><td class="sym">&#12373;</td><td class="sym">&#12375;</td><td class="sym">&#12377;</td><td class="sym">&#12379;</td><td class="sym">&#12381;</td></tr>
    <tr><td class="letter">sa</td><td class="letter">shi</td><td class="letter">su</td><td class="letter">se</td><td class="letter">so</td></tr>
    
    <tr><td class="sym">&#12383;</td><td class="sym">&#12385;</td><td class="sym">&#12388;</td><td class="sym">&#12390;</td><td class="sym">&#12392;</td></tr>
    <tr><td class="letter">ta</td><td class="letter">chi</td><td class="letter">tsu</td><td class="letter">te</td><td class="letter">to</td></tr>
    
    <tr><td class="sym">&#12394;</td><td class="sym">&#12395;</td><td class="sym">&#12396;</td><td class="sym">&#12397;</td><td class="sym">&#12398;</td></tr>
    <tr><td class="letter">na</td><td class="letter">ni</td><td class="letter">nu</td><td class="letter">ne</td><td class="letter">no</td></tr>
    
    <tr><td class="sym">&#12399;</td><td class="sym">&#12402;</td><td class="sym">&#12405;</td><td class="sym">&#12408;</td><td class="sym">&#12411;</td></tr>
    <tr><td class="letter">ha</td><td class="letter">hi</td><td class="letter">fu</td><td class="letter">he</td><td class="letter">ho</td></tr>
    
    <tr><td class="sym">&#12414;</td><td class="sym">&#12415;</td><td class="sym">&#12416;</td><td class="sym">&#12417;</td><td class="sym">&#12418;</td></tr>
    <tr><td class="letter">ma</td><td class="letter">mi</td><td class="letter">mu</td><td class="letter">me</td><td class="letter">mo</td></tr>
    
    <tr><td class="sym">&#12420;</td><td class="sym"></td><td class="sym">&#12422;</td><td class="sym"></td><td class="sym">&#12424;</td></tr>
    <tr><td class="letter">ya</td><td class="letter">i</td><td class="letter">yu</td><td class="letter">e</td><td class="letter">yo</td></tr>
    
    <tr><td class="sym">&#12425;</td><td class="sym">&#12426;</td><td class="sym">&#12427;</td><td class="sym">&#12428;</td><td class="sym">&#12429;</td></tr>
    <tr><td class="letter">ra</td><td class="letter">ri</td><td class="letter">ru</td><td class="letter">re</td><td class="letter">ro</td></tr>
    
    <tr><td class="sym">&#12431;</td><td class="sym"></td><td class="sym"></td><td class="sym"></td><td class="sym">&#12434;</td></tr>
    <tr><td class="letter">wa</td><td class="letter">i</td><td class="letter">u</td><td class="letter">e</td><td class="letter">o</td></tr>
    
    <tr><td class="sym">&#12435;</td><td class="sym"></td><td class="sym"></td><td class="sym"></td><td class="sym"></td></tr>
    <tr><td class="letter">n</td><td class="letter"></td><td class="letter"></td><td class="letter"></td><td class="letter"></td></tr>
    
    </table>
    
    <table id="katakana" class="left_f symbols_table">
    
    <tr><td class="sym">&#12450;</td><td class="sym">&#12452;</td><td class="sym">&#12454;</td><td class="sym">&#12456;</td><td class="sym">&#12458;</td></tr>
    <tr><td class="letter">a</td><td class="letter">i</td><td class="letter">u</td><td class="letter">e</td><td class="letter">o</td></tr>
    
    <tr><td class="sym">&#12459;</td><td class="sym">&#12461;</td><td class="sym">&#12463;</td><td class="sym">&#12465;</td><td class="sym">&#12467;</td></tr>
    <tr><td class="letter">ka</td><td class="letter">ki</td><td class="letter">ku</td><td class="letter">ke</td><td class="letter">ko</td></tr>
    
    <tr><td class="sym">&#12469;</td><td class="sym">&#12471;</td><td class="sym">&#12473;</td><td class="sym">&#12475;</td><td class="sym">&#12477;</td></tr>
    <tr><td class="letter">sa</td><td class="letter">shi</td><td class="letter">su</td><td class="letter">se</td><td class="letter">so</td></tr>
    
    <tr><td class="sym">&#12479;</td><td class="sym">&#12481;</td><td class="sym">&#12483;</td><td class="sym">&#12486;</td><td class="sym">&#12488;</td></tr>
    <tr><td class="letter">ta</td><td class="letter">chi</td><td class="letter">tsu</td><td class="letter">te</td><td class="letter">to</td></tr>
    
    <tr><td class="sym">&#12490;</td><td class="sym">&#12491;</td><td class="sym">&#12492;</td><td class="sym">&#12493;</td><td class="sym">&#12494;</td></tr>
    <tr><td class="letter">na</td><td class="letter">ni</td><td class="letter">nu</td><td class="letter">ne</td><td class="letter">no</td></tr>
    
    <tr><td class="sym">&#12495;</td><td class="sym">&#12498;</td><td class="sym">&#12501;</td><td class="sym">&#12504;</td><td class="sym">&#12507;</td></tr>
    <tr><td class="letter">ha</td><td class="letter">hi</td><td class="letter">fu</td><td class="letter">he</td><td class="letter">ho</td></tr>
    
    <tr><td class="sym">&#12510;</td><td class="sym">&#12511;</td><td class="sym">&#12512;</td><td class="sym">&#12513;</td><td class="sym">&#12514;</td></tr>
    <tr><td class="letter">ma</td><td class="letter">mi</td><td class="letter">mu</td><td class="letter">me</td><td class="letter">mo</td></tr>
    
    <tr><td class="sym">&#12516;</td><td class="sym"></td><td class="sym">&#12518;</td><td class="sym"></td><td class="sym">&#12520;</td></tr>
    <tr><td class="letter">ya</td><td class="letter">i</td><td class="letter">yu</td><td class="letter">e</td><td class="letter">yo</td></tr>
    
    <tr><td class="sym">&#12521;</td><td class="sym">&#12522;</td><td class="sym">&#12523;</td><td class="sym">&#12524;</td><td class="sym">&#12525;</td></tr>
    <tr><td class="letter">ra</td><td class="letter">ri</td><td class="letter">ru</td><td class="letter">re</td><td class="letter">ro</td></tr>
    
    <tr><td class="sym">&#12527;</td><td class="sym"></td><td class="sym"></td><td class="sym"></td><td class="sym">&#12530;</td></tr>
    <tr><td class="letter">wa</td><td class="letter">i</td><td class="letter">u</td><td class="letter">e</td><td class="letter">o</td></tr>
    
    <tr><td class="sym">&#12531;</td><td class="sym"></td><td class="sym"></td><td class="sym"></td><td class="sym"></td></tr>
    <tr><td class="letter">n</td><td class="letter"></td><td class="letter"></td><td class="letter"></td><td class="letter"></td></tr>
    
    </table>

    <table id="arabic" class="left_f symbols_table">
    
    <tr><td class="sym">&#65165;</td><td class="sym">&#65167;</td><td class="sym">&#65173;</td><td class="sym">&#65177;</td><td class="sym">&#65181;</td></tr>
    <tr><td class="letter">a</td><td class="letter">b</td><td class="letter">t</td><td class="letter">th</td><td class="letter">j</td></tr>
    
    <tr><td class="sym">&#65185;</td><td class="sym">&#65189;</td><td class="sym">&#65193;</td><td class="sym">&#65195;</td><td class="sym">&#65197;</td></tr>
    <tr><td class="letter">H</td><td class="letter">kh</td><td class="letter">d</td><td class="letter">dh</td><td class="letter">r</td></tr>
    
    <tr><td class="sym">&#65199;</td><td class="sym">&#65201;</td><td class="sym">&#65205;</td><td class="sym">&#65209;</td><td class="sym">&#65213;</td></tr>
    <tr><td class="letter">z</td><td class="letter">s</td><td class="letter">sh</td><td class="letter">S</td><td class="letter">D</td></tr>
    
    <tr><td class="sym">&#65217;</td><td class="sym">&#65221;</td><td class="sym">&#65225;</td><td class="sym">&#65229;</td><td class="sym">&#65233;</td></tr>
    <tr><td class="letter">T</td><td class="letter">DH</td><td class="letter">-</td><td class="letter">gh</td><td class="letter">f</td></tr>
    
    <tr><td class="sym">&#65237;</td><td class="sym">&#65241;</td><td class="sym">&#65245;</td><td class="sym">&#65249;</td><td class="sym">&#65253;</td></tr>
    <tr><td class="letter">q</td><td class="letter">k</td><td class="letter">l</td><td class="letter">m</td><td class="letter">n</td></tr>
    
    <tr><td class="sym">&#65257;</td><td class="sym">&#65261;</td><td class="sym">&#65265;</td><td class="sym"></td><td class="sym"></td></tr>
    <tr><td class="letter">h</td><td class="letter">w</td><td class="letter">y</td><td class="letter"></td><td class="letter"></td></tr>
    
    </table>
    
    <table id="russian" class="left_f symbols_table">
    
    <tr><td class="sym">&#1040;</td><td class="sym">&#1041;</td><td class="sym">&#1042;</td><td class="sym">&#1043;</td><td class="sym">&#1044;</td></tr>
    <tr><td class="letter">a</td><td class="letter">b</td><td class="letter">v</td><td class="letter">g</td><td class="letter">d</td></tr>
    
    <tr><td class="sym">&#1045;</td><td class="sym">&#203;</td><td class="sym">&#1046;</td><td class="sym">&#1047;</td><td class="sym">&#1048;</td></tr>
    <tr><td class="letter">ie</td><td class="letter">io</td><td class="letter">j</td><td class="letter">z</td><td class="letter">i</td></tr>
    
    <tr><td class="sym">&#1049;</td><td class="sym">&#1050;</td><td class="sym">&#1051;</td><td class="sym">&#1052;</td><td class="sym">&#1053;</td></tr>
    <tr><td class="letter">y</td><td class="letter">k</td><td class="letter">l</td><td class="letter">m</td><td class="letter">n</td></tr>
    
    <tr><td class="sym">&#1054;</td><td class="sym">&#1055;</td><td class="sym">&#1056;</td><td class="sym">&#1057;</td><td class="sym">&#1058;</td></tr>
    <tr><td class="letter">o</td><td class="letter">p</td><td class="letter">r</td><td class="letter">s</td><td class="letter">t</td></tr>
    
    <tr><td class="sym">&#1059;</td><td class="sym">&#1060;</td><td class="sym">&#1061;</td><td class="sym">&#1062;</td><td class="sym">&#1063;</td></tr>
    <tr><td class="letter">u</td><td class="letter">f</td><td class="letter">h</td><td class="letter">ts</td><td class="letter">tch</td></tr>
    
    <tr><td class="sym">&#1064;</td><td class="sym">&#1065;</td><td class="sym">&#1066;</td><td class="sym">&#1067;</td><td class="sym">&#1068;</td></tr>
    <tr><td class="letter">sh</td><td class="letter">sh</td><td class="letter">-</td><td class="letter">i</td><td class="letter">-</td></tr>
    
    <tr><td class="sym">&#1069;</td><td class="sym">&#1070;</td><td class="sym">&#1071;</td><td class="sym"></td><td class="sym"></td></tr>
    <tr><td class="letter">e</td><td class="letter">iu</td><td class="letter">ia</td><td class="letter"></td><td class="letter"></td></tr>
    
    </table>

    <div class="clearfix"></div>
    <p></p>
    <p></p>
    
    <script>

    var hiragana = // 
	[    'a', '12354',    'i', '12356',    'u', '12358',    'e', '12360',    'o', '12362'
	 ,  'ka', '12363',   'ki', '12365',   'ku', '12367',   'ke', '12369',   'ko', '12371'
	 ,  'sa', '12373',  'shi', '12375',   'su', '12377',   'se', '12379',   'so', '12381'
	 ,  'ta', '12383',  'chi', '12385',  'tsu', '12388',   'te', '12390',   'to', '12392'
	 ,  'na', '12394',   'ni', '12395',   'nu', '12396',   'ne', '12397',   'no', '12398'
	 ,  'ha', '12399',   'hi', '12402',   'fu', '12405',   'he', '12408',   'ho', '12411'
	 ,  'ma', '12414',   'mi', '12415',   'mu', '12416',   'me', '12417',   'mo', '12418'
	 ,  'ya', '12420',                    'yu', '12422',                    'yo', '12424'
	 ,  'ra', '12425',   'ri', '12426',   'ru', '12427',   're', '12428',   'ro', '12429'
	 ,  'wa', '12431',                                                      'wo', '12434'
	 ,   'n', '12435'
    ];
    
    var katakana = // 
	[    'a', '12450',    'i', '12452',    'u', '12454',    'e', '12456',    'o', '12458'
	 ,  'ka', '12459',   'ki', '12461',   'ku', '12463',   'ke', '12465',   'ko', '12467'
	 ,  'sa', '12469',  'shi', '12471',   'su', '12473',   'se', '12475',   'so', '12477'
	 ,  'ta', '12479',  'chi', '12481',  'tsu', '12483',   'te', '12486',   'to', '12488'
	 ,  'na', '12490',   'ni', '12491',   'nu', '12492',   'ne', '12493',   'no', '12494'
	 ,  'ha', '12495',   'hi', '12498',   'fu', '12501',   'he', '12504',   'ho', '12507'
	 ,  'ma', '12510',   'mi', '12511',   'mu', '12512',   'me', '12513',   'mo', '12514'
	 ,  'ya', '12516',                    'yu', '12518',                    'yo', '12520'
	 ,  'ra', '12521',   'ri', '12522',   'ru', '12523',   're', '12524',   'ro', '12525'
	 ,  'wa', '12527',                                                      'wo', '12530'
	 ,   'n', '12531'
    ];
    
    var arabic = //
    [   'a', '65165',  'b', '65167',  't', '65173', 'th', '65177', 'j', '65181', 
        'H', '65185', 'kh', '65189',  'd', '65193', 'dh', '65195', 'r', '65197',
        'z', '65199',  's', '65201', 'sh', '65205',  'S', '65209', 'D', '65213',
        'T', '65217', 'DH', '65221',  '-', '65225', 'gh', '65229', 'f', '65233', 
        'q', '65237',  'k', '65241',  'l', '65245',  'm', '65249', 'n', '65253', 
        'h', '65257',  'w', '65261',  'y', '65265'
    ];
    
    var russian = //
    [  'a', '1040',  'b', '1041',  'v', '1042',  'g', '1043',   'd', '1044', 
      'ie', '1045', 'io',  '203',  'j', '1046',  'z', '1047',   'i', '1048', 
       'y', '1049',  'k', '1050',  'l', '1051',  'm', '1052',   'n', '1053', 
       'o', '1054',  'p', '1055',  'r', '1056',  's', '1057',   't', '1058', 
       'u', '1059',  'f', '1060',  'h', '1061', 'ts', '1062', 'tch', '1063', 
      'sh', '1064', 'sh', '1065',  '-', '1066',  'i', '1067',   '-', '1068', 
       'e', '1069', 'iu', '1070', 'ia', '1071'
    ];
    
    var games = 
    {  
       'hiragana': hiragana
     , 'katakana': katakana
     ,   'arabic': arabic
     ,  'russian': russian
    }
    
    var symbols = [];
    var letters = [];
    
    var current_idx = -1;
    var current_let = '';
    var current_sym = '';
    var current_game = [];
    
    var current_table = '';
    
    var game_start = new Date();
    
    var msecPerMinute = 1000 * 60;
    var msecPerHour = msecPerMinute * 60;
    var msecPerDay = msecPerHour * 24;
    
    function check_result(e) {
      var input = document.getElementById(e.id);
      var result = input.value;
      console.log(result);
    
      if (result === current_let) {
        input.value = '';
        play_next_symbol();
      }
    }
    
    function finish_game() {
      var game_end = Date.now();
      var interval = game_end - game_start;
    
      var days = Math.floor(interval / msecPerDay);
      interval = interval - (days * msecPerDay);
    
      var hours = Math.floor(interval / msecPerHour);
      interval = interval - (hours * msecPerHour);
    
      var minutes = Math.floor(interval / msecPerMinute);
      interval = interval - (minutes * msecPerMinute);
    
      var seconds = Math.floor(interval / 1000);
    
      var fmt_time = '';
    
      if (days !== 0) { fmt_time += days + ' days '; }
      if (hours !== 0) { fmt_time += hours + ' hours '; }
      if (minutes !== 0) { fmt_time += minutes + ' minutes '; }
      if (seconds !== 0) { fmt_time += seconds + ' seconds '; }
    
      document.getElementById('elapsed_time').innerHTML = fmt_time;
      document.getElementById('end_of_game').style.visibility='visible';
    }
    
    function play_next_symbol() {
      remove_current_symbol();
    
      if (letters.length === 0) {
        finish_game();
    
      } else {    
        choose_next_symbol();
        show_next_symbol();
      }
    }
    
    function show_next_symbol() {
      document.getElementById('guess_symbol').innerHTML = '&#' + current_sym + ';';
    }
    
    function choose_next_symbol() {
      current_idx = Math.floor(Math.random() * symbols.length);
    
      current_let = letters[current_idx];
      current_sym = symbols[current_idx];
    }
    
    function remove_current_symbol() {
      letters.splice(current_idx, 1);
      symbols.splice(current_idx, 1);
    }
    
    function copy_game_to_arrays() {
      symbols = [];
      letters = [];
    
      for (var i = 0; i < current_game.length; i+=2) {
    	letters.push(current_game[i]);
    	symbols.push(current_game[i+1]);
      }
    }
    
    function get_selected_game() {
    	
      var radio_ids = [
                         'game_hiragana', 'game_katakana'
                       ,   'game_arabic',  'game_russian'
                       ];
      
      for (var i = 0; i < radio_ids.length; i++) {
    	  
    	var radio_id = radio_ids[i];
    	var radio = document.getElementById(radio_id);
    	
    	if (radio.checked) {
          return radio.value;
    	}
      }
    	
      throw { msg: 'No game selected or unknown game' };
    }
    
    function play_game() {
    
      var game_value = get_selected_game();
      
      current_game = games[game_value];
      
      document.getElementById('current_table').innerHTML = document.getElementById(game_value).innerHTML;
      
      document.getElementById('end_of_game').style.visibility='hidden';
      document.getElementById('elapsed_time').innerHTML='';
      document.getElementById('guess_result').focus();
      
      copy_game_to_arrays();
      choose_next_symbol();
      show_next_symbol();
      
      game_start = Date.now();
    }
    
    play_game();
    
    </script>

  </body>
</html>
